<!DOCTYPE html> 
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Buttcoin Pizza Index</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; text-align: center; }
        h1 { text-align: center; }
        h2, h3, h4, h5 { margin-top: 20px; }
        .index-value { font-size: 2em; color: red; text-align: center; }
        img { display: block; margin: 10px auto; max-width: 100%; }
        #last-updated { margin-top: 10px; font-size: 0.9em; color: gray; }
    </style>
</head>
<body>
    <h1>Buttcoin Pizza Index</h1>
    <p>The Buttcoin Pizza Index is now at</p>
    <h4 class="index-value">$<span id="index">0.00</span>!</h4>

    <h2>10,000 Buttcoins in Gold</h2>
    <p><span id="gold-oz">0.00000</span> troy ounces</p>
    <p><span id="gold-kg">0.000000</span> kg</p>

    <h2>10,000 Buttcoins in Silver</h2>
    <p><span id="silver-oz">0.000</span> troy ounces</p>
    <p><span id="silver-tons">0.0000000</span> metric tons</p>

    <h2>10,000 Buttcoins in USD</h2>
    <p>$<span id="usd-value">0.00</span></p>

    <p>One Buttcoin in gold (grams): <span id="one-buttcoin-gold">0.000000000</span></p>
    <div id="last-updated">Last updated: --</div>

    <script>
        const TROY_OZ_PER_KG = 32.1507;
        const TROY_OZ_PER_TON = 32150.7;

        async function updatePrices() {
            let GOLD_PRICE = 3351.30; // fallback USD/oz
            let SILVER_PRICE = 37.65; // fallback USD/oz

            try {
                // Free metals API (no key needed) from metals.live
                const metalResponse = await fetch('https://api.metals.live/v1/spot');
                const metals = await metalResponse.json();
                const gold = metals.find(m => m.hasOwnProperty("gold"));
                const silver = metals.find(m => m.hasOwnProperty("silver"));
                if (gold && gold.gold) GOLD_PRICE = gold.gold;
                if (silver && silver.silver) SILVER_PRICE = silver.silver;
            } catch (err) {
                console.warn("Gold/Silver price fetch failed, using fallback:", err);
            }

            try {
                const response = await fetch('https://api.dexscreener.com/latest/dex/pairs/solana/FasH397CeZLNYWkd3wWK9vrmjd1z93n3b59DssRXpump');
                const data = await response.json();
                const priceUsd = parseFloat(data.pairs[0].priceUsd);
                
                const index = 10000 * priceUsd;
                document.getElementById('index').textContent = index.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 });

                const goldOz = index / GOLD_PRICE;
                document.getElementById('gold-oz').textContent = goldOz.toFixed(5);
                document.getElementById('gold-kg').textContent = (goldOz / TROY_OZ_PER_KG).toFixed(6);

                const silverOz = index / SILVER_PRICE;
                document.getElementById('silver-oz').textContent = silverOz.toFixed(3);
                document.getElementById('silver-tons').textContent = (silverOz / TROY_OZ_PER_TON).toFixed(7);

                document.getElementById('usd-value').textContent = index.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 });

                const oneButtcoinGoldGrams = (priceUsd / GOLD_PRICE) * 31.1035;
                document.getElementById('one-buttcoin-gold').textContent = oneButtcoinGoldGrams.toFixed(9);

                // Last updated timestamp
                const now = new Date();
                document.getElementById('last-updated').textContent = `Last updated: ${now.toLocaleTimeString()}`;
            } catch (err) {
                console.error("Buttcoin price fetch failed:", err);
            }
        }

        updatePrices();
        setInterval(updatePrices, 60000);
    </script>
</body>
</html>
