<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Buttcoin Pizza Index</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    h1 { text-align: center; }
    h2, h3, h4 { margin-top: 20px; }
    .index-value { font-size: 2em; color: red; text-align: center; }
    #last-updated { text-align: center; font-size: 0.9em; color: gray; margin-top: 5px; }

    .value-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 16px;
      margin-top: 8px;
      flex-wrap: wrap;
    }
    .value-row p {
      margin: 0;
      flex: 1 1 auto;
    }
    .value-img {
      flex: 0 0 auto;
      width: 60px;
      height: auto;
    }
    .usd-icon {
      width: 50px;
      height: auto;
    }
  </style>
</head>
<body>
  <h1>Buttcoin Pizza Index</h1>
  <p style="text-align: center;">The Buttcoin Pizza Index is now at</p>
  <h4 class="index-value">$<span id="index">--</span>!</h4>
  <div id="last-updated">Last updated: --</div>

  <h2>What is the Buttcoin Pizza Index?</h2>
  <!-- ... existing paragraphs ... -->

  <h2>Value of the Buttcoin Pizza in Gold</h2>
  <div class="value-row">
    <p>10,000 Buttcoins are now worth <span id="gold-oz">--</span> troy ounces gold.</p>
    <img
      class="value-img"
      src="https://upload.wikimedia.org/wikipedia/commons/a/af/Gold_bullion_bars.jpg"
      alt="Gold bullion bars"
    />
  </div>

  <h2>Value of the Buttcoin Pizza in Silver</h2>
  <div class="value-row">
    <p>10,000 Buttcoins are now worth <span id="silver-oz">--</span> troy ounces silver.</p>
    <img
      class="value-img"
      src="https://upload.wikimedia.org/wikipedia/commons/c/c1/1000oz.silver.bullion.bar.top.jpg"
      alt="Silver bullion bar"
    />
  </div>

  <h2>Value of the Buttcoin Pizza in USD</h2>
  <div class="value-row">
    <p>Today, $<span id="usd-value">--</span> can buy you 10,000 Buttcoins.</p>
    <img
      class="usd-icon"
      src="https://upload.wikimedia.org/wikipedia/commons/a/a2/US_Dollar_banknotes.jpg"
      alt="US dollar banknotes"
    />
  </div>

  <!-- ... rest of your content ... -->

<script>
const WORKER_URL = "https://buttcoinpizzaindex.tannerperry234.workers.dev/buttcoin-data";

async function fetchJSON(url) {
  const res = await fetch(url, { cache: "no-store" });
  if (!res.ok) throw new Error(`HTTP error ${res.status}`);
  return res.json();
}

async function updateValues() {
  try {
    const data = await fetchJSON(WORKER_URL);

    const totalUsd = parseFloat(data.buttcoin_usd);
    const goldOunces = parseFloat(data.buttcoin_gold_oz);
    const silverOunces = parseFloat(data.buttcoin_silver_oz);

    document.getElementById("index").textContent = totalUsd.toFixed(2);
    document.getElementById("usd-value").textContent = totalUsd.toFixed(2);
    document.getElementById("gold-oz").textContent = goldOunces.toFixed(5);
    document.getElementById("silver-oz").textContent = silverOunces.toFixed(5);

    document.getElementById("last-updated").textContent =
      `Last updated: ${new Date().toLocaleTimeString()}`;
  } catch (err) {
    console.error("Update failed:", err);
    document.getElementById("index").textContent = "--";
    document.getElementById("usd-value").textContent = "--";
    document.getElementById("gold-oz").textContent = "--";
    document.getElementById("silver-oz").textContent = "--";
  }
}

updateValues();
setInterval(updateValues, 60000);
</script>
</body>
</html>
